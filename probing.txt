1. В RunSteps
1.1 остановиться перед необработанным кадром измерений, не проскакивая защищенные
1.2 запомнить остаток от N (N - i)
1.3 сообщить, что нужно измерять (установить флаг flNeedProbe) 88007008000

2. в OnCuttingStoped после всех действий, если flNeedProbe
2.1 выполнить измерительный кадр, т.е. текущий кадр (записать регистры, пересчитать геометрию и дополнить ее в программу)
2.2 сбросить флаг "нужно измерять" (flNeedProbe)
2.2 пересчитать программу от текущего места до первого необработанного кадра измерений
2.3 вызвать RunSteps с оставшимся N




нужны 2 типа регенерации программы:
1. как обычно с игнорированием измерений, после нее в режиме резания всегда делается вторая
2. специальная для пробинга в режиме резания, без очистки ProbeHistory flProbePresent и ProbeState до первого необработанного probe кадр


в RegenerateStocks (и изменениях станка, деталей, оснастки) если есть пробинг сделать регенерацию типа 2, начиная с первой программы с пробингом:
в режиме резания до первого кадра измерений, поставить c пробингом полностью/частично
без резания - если состояние "поcчитан с пробингом", то полностью, игнорируя пробинг (если не нужны регистры), поставить "посчитан без".


при включении режима резания если есть пробинг сбросить все программы, начиная с первой, у которой состояние для пробинга "посчитан без".
при выходе из резания потребовать ресет, если не все программы имеют состояние "c пробингом полностью" или "нет пробинга"
---------
ВОПРОСЫ
запретить кнопку "исходная заготовка", если есть пробинг
временная заготовка
-----------
NCMDocument
флаг наличия пробинга в проекте. Обновляется в RegeneratePrograms (flProbePresent)
флаг "нужно измерять" flNeedProbe

NCUnit
флаг учета или неучета пробинга (необязательно)

BProgram
флаг состояния для пробинга (посчитан без/c пробингом полностью/частично) ProbeState (похоже, лишний)

----------------
Ограничения:
1. Probing кадр не может быть внутри цикла
2. В пробинг кадре не может быть фасок, скруглений, доп дуг и т.д.


